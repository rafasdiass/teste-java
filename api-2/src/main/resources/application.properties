# Configurações da aplicação
quarkus.application.name=fipe-api-2
quarkus.http.port=8081

# Database - H2 para desenvolvimento
quarkus.datasource.db-kind=h2
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.datasource.jdbc.url=jdbc:h2:mem:fipe_db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.packages=com.fipe.shared.entity

# Desabilitar enhancement do Hibernate completamente
quarkus.hibernate-orm.enhancement.enabled=false
quarkus.hibernate-orm.bytecode.use_reflection_optimizer=false
quarkus.hibernate-orm.enhancement.lazy-initialization=false

# Configurações para evitar modo interativo
quarkus.console.enabled=false
quarkus.dev.instrumentation=false
quarkus.live-reload.instrumentation=false

# Configurações do Flyway (desabilitado pois as migrações são executadas pela API-1)
quarkus.flyway.migrate-at-start=false

# Configurações do Redis (Cache) - DESABILITADO TEMPORARIAMENTE
# quarkus.redis.hosts=redis://localhost:6379
# quarkus.redis.timeout=10s
# quarkus.redis.max-pool-size=20
# quarkus.redis.max-pool-waiting=30

# Configurações de Cache Redis - DESABILITADO TEMPORARIAMENTE
# quarkus.cache.redis.expire-after-write=PT30M
# quarkus.cache.redis.key-type=java.lang.String
# quarkus.cache.redis.value-type=java.lang.Object

# Configurações do RabbitMQ
rabbitmq.host=localhost
rabbitmq.port=5672
rabbitmq.username=guest
rabbitmq.password=guest
rabbitmq.virtual-host=/

# Desabilitar DevServices (Docker não disponível)
quarkus.rabbitmq.devservices.enabled=false
quarkus.redis.devservices.enabled=false

# Configurações adicionais para desenvolvimento
quarkus.dev.ui.enabled=false
quarkus.smallrye-health.ui.enable=false
quarkus.swagger-ui.enable=false
quarkus.smallrye-openapi.enable=false
quarkus.arc.dev-mode.monitoring-enabled=false

# Configurações de Messaging - Consumer
mp.messaging.incoming.marcas-in.connector=smallrye-rabbitmq
mp.messaging.incoming.marcas-in.host=localhost
mp.messaging.incoming.marcas-in.port=5672
mp.messaging.incoming.marcas-in.username=guest
mp.messaging.incoming.marcas-in.password=guest
mp.messaging.incoming.marcas-in.virtual-host=/
mp.messaging.incoming.marcas-in.queue.name=marcas.process.queue
mp.messaging.incoming.marcas-in.exchange.name=marcas-out
mp.messaging.incoming.marcas-in.routing-key=marcas.process
mp.messaging.incoming.marcas-in.exchange.type=topic
mp.messaging.incoming.marcas-in.exchange.durable=true
mp.messaging.incoming.marcas-in.queue.durable=true
mp.messaging.incoming.marcas-in.auto-acknowledgment=false
mp.messaging.incoming.marcas-in.failure-strategy=reject

# Configurações do cliente HTTP para API FIPE
quarkus.rest-client."com.fipe.api2.client.FipeClient".url=https://parallelum.com.br/fipe/api/v1
quarkus.rest-client."com.fipe.api2.client.FipeClient".connect-timeout=30000
quarkus.rest-client."com.fipe.api2.client.FipeClient".read-timeout=30000

# Configurações de processamento assíncrono
quarkus.thread-pool.max-threads=20
quarkus.thread-pool.core-threads=5
quarkus.thread-pool.queue-size=100

# Configurações de retry para falhas de processamento
quarkus.smallrye-fault-tolerance.enabled=true

# Configurações JWT (temporariamente desabilitado para testes)
# mp.jwt.verify.issuer=https://fipe-api.com
# mp.jwt.verify.publickey.location=META-INF/resources/publicKey.pem
# jwt.token.expiration=PT1H
quarkus.smallrye-jwt.enabled=false

# Configurações de logging
quarkus.log.level=INFO
quarkus.log.category."com.fipe".level=DEBUG
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# Configurações específicas para processamento de dados FIPE
fipe.processing.batch-size=50
fipe.processing.delay-between-requests=100
fipe.processing.max-retries=3
fipe.processing.retry-delay=5000

# Configurações de desenvolvimento
%dev.quarkus.log.level=DEBUG
# %dev.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/fipe_db_dev
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.redis.hosts=redis://localhost:6379
%dev.fipe.processing.delay-between-requests=50
%dev.quarkus.test.continuous-testing=disabled

# Configurações de teste
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.flyway.migrate-at-start=false
%test.fipe.processing.delay-between-requests=0

# Configurações de produção
%prod.quarkus.log.level=WARN
%prod.quarkus.log.category."com.fipe".level=INFO
%prod.quarkus.redis.timeout=5s
%prod.fipe.processing.delay-between-requests=200